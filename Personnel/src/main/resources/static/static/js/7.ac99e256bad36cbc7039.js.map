{"version":3,"sources":["webpack:///src/views/Data_Scanning/scan.vue","webpack:///./src/views/Data_Scanning/scan.vue?d4f3","webpack:///./src/views/Data_Scanning/scan.vue"],"names":["scan","data","loadId","headers","Content-Type","imageUrl","fileList","time","postTime","created","myData2","sessionStorage","getItem","this","methods","uploadFileHandler","res","_this","console","log","words_result","words","nowTime","Date","dd","String","getDate","padStart","mm","getMonth","getFullYear","getHours","getMinutes","getSeconds","$axios","post","then","resp","code","$confirm","confirmButtonText","dangerouslyUseHTMLString","cancelButtonText","type","beforeAvatarUpload","file","isJPG","isLt2M","size","$message","error","uploadFileErrorHandler","beforeRemove","name","Data_Scanning_scan","render","_vm","_h","$createElement","_c","_self","_v","ref","attrs","model","editForm","rules","editFormRules","label-width","staticClass","drag","action","multiple","auto-upload","file-list","on-success","on-error","before-upload","before-remove","src","_e","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/7.ac99e256bad36cbc7039.js","sourcesContent":["<template>\r\n  <div >\r\n    <br><br>\r\n    <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"80px\">\r\n\t\t\t\r\n\t\t</el-form>\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        drag\r\n        action=\"/test/upload\"\r\n        multiple\r\n        :auto-upload = \"true\"\r\n        :file-list=\"fileList\"\r\n        :on-success=\"uploadFileHandler\"\r\n        :on-error=\"uploadFileErrorHandler\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n        :before-remove=\"beforeRemove\">\r\n        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg文件，且不超过500kb</div>\r\n      </el-upload>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        loadId: '',\r\n        headers: {\r\n\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t\t\t},\r\n        imageUrl: '',\r\n        fileList: [],\r\n        time: '',\r\n        postTime: '',\r\n      };\r\n    },\r\n    created() {\r\n    const myData2 = sessionStorage.getItem('userId2');\r\n    this.loadId = myData2;\r\n    },\r\n    methods: {\r\n      uploadFileHandler(res){\r\n        console.log(res.words_result[8].words)\r\n        const nowTime = new Date()\r\n        let dd = String(nowTime.getDate()).padStart(2, '0');\r\n        let mm = String(nowTime.getMonth() + 1).padStart(2, '0');\r\n\r\n        this.time = nowTime.getFullYear() + '-' + mm + '-' + dd + ' ' + nowTime.getHours() + ':' + nowTime.getMinutes() + ':' + nowTime.getSeconds()\r\n        this.postTime = nowTime.getFullYear() + '-' + mm + '-' + dd\r\n        console.log(this.time)\r\n        if(res.words_result[8].words === this.loadId){\r\n          this.$axios.post('/checking/attendance?id=' + res.words_result[8].words +'&date=' + this.postTime, {}).then(resp=>{\r\n            if(resp && resp.data.code === 200){\r\n              this.$confirm('工号为'+res.words_result[8].words+'的'+res.words_result[4].words+'，您好！'+'</br>您已于'+this.time+'签到成功！'+'</br>好好工作，天天加薪！'\r\n              , '签到成功！', {\r\n                confirmButtonText: '确定',\r\n                dangerouslyUseHTMLString: true,\r\n                cancelButtonText: '取消',\r\n                type: 'success'\r\n              })\r\n            }else{\r\n              this.$confirm('您今日已签到，谢谢！', '签到失败！', {\r\n                confirmButtonText: '确定',\r\n                dangerouslyUseHTMLString: true,\r\n                cancelButtonText: '取消',\r\n                type: 'warning '\r\n              })\r\n            }\r\n          })\r\n        }\r\n        else{\r\n          this.$confirm('您的工号与登录账号不符，请重试！', '签到失败！', {\r\n            confirmButtonText: '确定',\r\n            dangerouslyUseHTMLString: true,\r\n            cancelButtonText: '取消',\r\n            type: 'error'\r\n          })\r\n        }\r\n        // this.imageUrl = URL.createObjectURL(file.raw);\r\n      },\r\n      beforeAvatarUpload(file) {\r\n        console.log(\"看看这个\",this.fileList)\r\n        // var _this = this;\r\n        // debugger;\r\n        // var files=file.target.files[0];\r\n        debugger;\r\n        const isJPG = file.type === \"image/jpeg\";\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n  \r\n        if (!isJPG) {\r\n          this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n        }\r\n        return this.file\r\n      },\r\n      uploadFileErrorHandler(res){\r\n        this.$message.error(\"上传失败,请检查网络连接\")\r\n      },\r\n      beforeRemove(file, fileList) {\r\n        this.$confirm(`确定移除 ${ file.name }？`);\r\n      },\r\n    }\r\n  }\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/Data_Scanning/scan.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('br'),_c('br'),_vm._v(\" \"),_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"80px\"}}),_vm._v(\" \"),_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":\"/test/upload\",\"multiple\":\"\",\"auto-upload\":true,\"file-list\":_vm.fileList,\"on-success\":_vm.uploadFileHandler,\"on-error\":_vm.uploadFileErrorHandler,\"before-upload\":_vm.beforeAvatarUpload,\"before-remove\":_vm.beforeRemove}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_vm._e(),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg文件，且不超过500kb\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5692144c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Data_Scanning/scan.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./scan.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./scan.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5692144c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./scan.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Data_Scanning/scan.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}