{"version":3,"sources":["webpack:///src/views/Data_Scanning/input.vue","webpack:///./src/views/Data_Scanning/input.vue?41ac","webpack:///./src/views/Data_Scanning/input.vue"],"names":["input","data","id","calendarData","today","Date","created","_this2","this","_this","myData","sessionStorage","getItem","$nextTick","document","querySelector","addEventListener","currDate","currSelected","isSameNode","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","console","log","todayString","textContent","includes","h","$createElement","$notify","title","message","style","type","$axios","post","then","resp","code","catch","err","mounted","initCalendar","methods","_count","all","spread","resp1","resp2","i","push","day","status","date","Data_Scanning_input","render","_vm","_h","_c","_self","scopedSlots","_u","key","fn","ref","_v","_s","split","slice","join","_l","item","index","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.0bcdf889f63147068b8d.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-calendar>\r\n      <template slot=\"dateCell\" slot-scope=\"{ data }\">\r\n        <p>{{ data.day.split(\"-\").slice(1).join(\"-\") }}<br/>\r\n        <br><br></p>\r\n          <p>{{ (data.day == today) ? '✔️' : ''}}</p>\r\n        <div v-for=\"(item, index) in calendarData\" :key=\"index\">\r\n          <div v-if=\"data.day == item.day[0] && (data.day !== today)\">\r\n            {{item.status}}\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </el-calendar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      id: '',\r\n      calendarData: [ ],\r\n      today: new Date()\r\n    }\r\n  },\r\n  created() {\r\n    var _this = this;\r\n    const myData = sessionStorage.getItem('userId2');\r\n    this.id = myData;\r\n\r\n    this.$nextTick(() => {\r\n      let preBtn = document.querySelector('tbody');\r\n      preBtn.addEventListener('click', () => {\r\n        let currDate = document.querySelector('.is-today');\r\n        let currSelected = document.querySelector('.is-selected');\r\n        if (currDate && currSelected && currDate.isSameNode(currSelected)) {\r\n          this.today = new Date();\r\n          let dd = String(this.today.getDate()).padStart(2, '0');\r\n          let mm = String(this.today.getMonth() + 1).padStart(2, '0');\r\n          let yyyy = this.today.getFullYear();\r\n          console.log(\"yyyymmdd=\" + yyyy + mm + dd);\r\n          let todayString = `${yyyy}-${mm}-${dd}`//here\r\n          if (!currDate.textContent.includes( `✔️`)) {\r\n            this.$axios.post(\"/checking/attendance?id=\" + _this.id +\"&date=\" + todayString, {}).then(resp => {\r\n              if (resp && resp.data.code === 200) {\r\n                this.today = todayString;\r\n                const h = this.$createElement;\r\n                this.$notify({\r\n                title: 'Success',\r\n                message: h('i', { style: 'color: teal'}, '今日打卡成功！'),\r\n                type: 'success'\r\n                });\r\n              } \r\n            }).catch(err => console.log(\"Error: \", err))\r\n          } else {\r\n            // 已经打过卡了\r\n            // this.today = `${yyyy}-${mm}-${dd}`;\r\n            this.today = todayString;\r\n            const h = this.$createElement;\r\n            this.$notify({\r\n              title: 'Warning',\r\n              message: h('i', { style: 'color: black'}, '今日已打卡, 请勿重复打卡!'),\r\n              type: 'warning'\r\n            });\r\n          }\r\n        }\r\n      })\r\n    })\r\n  },\r\n  mounted: function() {\r\n    this.initCalendar();\r\n  },\r\n  methods: {\r\n    initCalendar() {   \r\n      var _this = this;\r\n      var _count = null;\r\n      this.$axios.all([\r\n        this.$axios.post(\"/checking/count?id=\" + _this.id, {}),\r\n        this.$axios.post(\"/checking/all?id=\"+ _this.id, {})\r\n      ]).then(\r\n        this.$axios.spread((resp1, resp2) => {\r\n          if (resp1.data && resp1.data.code === 200) {\r\n            _count = resp1.data.data;\r\n          }\r\n          if (resp2.data && resp2.data.code === 200) {\r\n            for( var i = 0; i < _count; i++) {\r\n              _this.calendarData.push({day: [], status: '✔️'});\r\n              _this.calendarData[i].day[0]= resp2.data.data[i].date;            \r\n            }\r\n          }\r\n        })\r\n      ).catch(err => console.log(\"Error: \", err))\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style>\r\n  .is-selected {\r\n    color: #1989FA;\r\n  }\r\n\r\n  .el-calendar-table:not(.is-range) td.next {\r\n    pointer-events: none;\r\n  }\r\n  .el-calendar-table:not(.is-range) td.prev {\r\n    pointer-events: none;\r\n  }\r\n  .el-calendar-table td:not(.is-today) {\r\n    pointer-events: none;\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/Data_Scanning/input.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-calendar',{scopedSlots:_vm._u([{key:\"dateCell\",fn:function(ref){\nvar data = ref.data;\nreturn [_c('p',[_vm._v(_vm._s(data.day.split(\"-\").slice(1).join(\"-\"))),_c('br'),_vm._v(\" \"),_c('br'),_c('br')]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s((data.day == _vm.today) ? '✔️' : ''))]),_vm._v(\" \"),_vm._l((_vm.calendarData),function(item,index){return _c('div',{key:index},[(data.day == item.day[0] && (data.day !== _vm.today))?_c('div',[_vm._v(\"\\n          \"+_vm._s(item.status)+\"\\n        \")]):_vm._e()])})]}}])})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f059abb8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Data_Scanning/input.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f059abb8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./input.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./input.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./input.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f059abb8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./input.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Data_Scanning/input.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}