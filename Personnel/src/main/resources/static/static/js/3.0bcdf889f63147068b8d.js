webpackJsonp([3],{"5ObO":function(t,e){},bTWw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{id:"",calendarData:[],today:new Date}},created:function(){var t=this,e=this,a=sessionStorage.getItem("userId2");this.id=a,this.$nextTick(function(){document.querySelector("tbody").addEventListener("click",function(){var a=document.querySelector(".is-today"),n=document.querySelector(".is-selected");if(a&&n&&a.isSameNode(n)){t.today=new Date;var i=String(t.today.getDate()).padStart(2,"0"),d=String(t.today.getMonth()+1).padStart(2,"0"),o=t.today.getFullYear();console.log("yyyymmdd="+o+d+i);var r=o+"-"+d+"-"+i;if(a.textContent.includes("✔️")){t.today=r;var c=t.$createElement;t.$notify({title:"Warning",message:c("i",{style:"color: black"},"今日已打卡, 请勿重复打卡!"),type:"warning"})}else t.$axios.post("/checking/attendance?id="+e.id+"&date="+r,{}).then(function(e){if(e&&200===e.data.code){t.today=r;var a=t.$createElement;t.$notify({title:"Success",message:a("i",{style:"color: teal"},"今日打卡成功！"),type:"success"})}}).catch(function(t){return console.log("Error: ",t)})}})})},mounted:function(){this.initCalendar()},methods:{initCalendar:function(){var t=this,e=null;this.$axios.all([this.$axios.post("/checking/count?id="+t.id,{}),this.$axios.post("/checking/all?id="+t.id,{})]).then(this.$axios.spread(function(a,n){if(a.data&&200===a.data.code&&(e=a.data.data),n.data&&200===n.data.code)for(var i=0;i<e;i++)t.calendarData.push({day:[],status:"✔️"}),t.calendarData[i].day[0]=n.data.data[i].date})).catch(function(t){return console.log("Error: ",t)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-calendar",{scopedSlots:t._u([{key:"dateCell",fn:function(e){var n=e.data;return[a("p",[t._v(t._s(n.day.split("-").slice(1).join("-"))),a("br"),t._v(" "),a("br"),a("br")]),t._v(" "),a("p",[t._v(t._s(n.day==t.today?"✔️":""))]),t._v(" "),t._l(t.calendarData,function(e,i){return a("div",{key:i},[n.day==e.day[0]&&n.day!==t.today?a("div",[t._v("\n          "+t._s(e.status)+"\n        ")]):t._e()])})]}}])})],1)},staticRenderFns:[]};var d=a("VU/8")(n,i,!1,function(t){a("5ObO")},null,null);e.default=d.exports}});
//# sourceMappingURL=3.0bcdf889f63147068b8d.js.map